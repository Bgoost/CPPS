#include "ShrubberyCreationForm.hpp"

ShrubberyCreationForm::ShrubberyCreationForm()
	:	AForm("Shrubbery Creation Form", 145, 137),
		target("Default Target")
{
	std::cout << YELLOW << "ShrubberyCreationForm \'" << target << "\' with grade to sign " << getGradeToSign() << " and grade to execute " << getGradeToExecute() << " successfully created" << RESET << std::endl;
}

ShrubberyCreationForm::ShrubberyCreationForm(const std::string &target)
	:	AForm("Shrubbery Creation Form", 145, 137),
		target(target)
{
	std::cout << YELLOW << "ShrubberyCreationForm \'" << target << "\' with grade to sign " << getGradeToSign() << " and grade to execute " << getGradeToExecute() << " successfully created" << RESET << std::endl;
}

ShrubberyCreationForm::ShrubberyCreationForm(const ShrubberyCreationForm &other)
	:	AForm(other),
		target(other.target)
{
	std::cout << "ShrubberyCreationForm created by copy constructor" << std::endl;
	*this = other;
}

ShrubberyCreationForm::~ShrubberyCreationForm()
{
	std::cout << YELLOW << "ShrubberyCreationForm " << RESET << "destructor called " << RED << "(THROWING IT ðŸ—‘ï¸ )" << RESET << std::endl;
}

ShrubberyCreationForm &ShrubberyCreationForm::operator=(const ShrubberyCreationForm &other)
{
	std::cout << "ShrubberyCreationForm assignment operator called" << std::endl;
	if (this != &other)
	{
		this->target = other.target;
	}
	return (*this);
}

const char *ShrubberyCreationForm::UnableToCreateFileException::what() const throw()
{
	return ("Unable to create file");
}

void trees(std::ofstream &file)
{
	file << "--------------------------------------------" << std::endl;
	file << "| â €â €â €â €â €â €â €â €â €â €â €â¡ â –â ’â ¢â£„â£€â¡€â£€â£€â €â¡ â ”â ’â ’â¢¤â¡€â €â €â €â €â €â €â €|" << std::endl;
	file << "| â €â €â €â €â €â €â €â €â €â¢€â¡´â¡‡â €â €â €â â  â¡‹â €â €â ™â ¦â €â €â €â €â£§â ¤â£€â €â €â €â €â €|" << std::endl;
	file << "| â €â €â €â €â €â €â €â¡ â –â Šâ ‘â ²â£„â£€â£ â –â ˜â ›â €â €â €â €â €â €â €â €â â €â¢¸â ‡â €â €â €â €|" << std::endl;
	file << "| â €â €â €â €â €â €â£¸â£‡â¡€â €â €â ˆâ â €â ‰â €â €â €â €â €â €â €â €â €â €â €â €â ˜â ‹â ²â£„â €â €â €|" << std::endl;
	file << "| â €â €â €â €â£ â ‹â €â €â €â €â €â €â €â €â €â €â €â¢€â£€â£€â €â €â €â €â €â €â €â €â €â¢€â¡¼â ‚â €â €|" << std::endl;
	file << "| â €â €â €â¢€â£§â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ €â €â¢±â €â €â €â €â €â €â €â â ºâ¡„â €â €â €|" << std::endl;
	file << "| â €â¡ â Šâ â €â €â €â €â €â €â €â €â €â €â €â €â  â¡€â €â¢€â¡¼â €â €â €â €â €â €â €â €â¢€â¡‡â €â €â €|" << std::endl;
	file << "| â¢°â ƒâ €â €â €â €â €â €â €â €â €â €â €â €â €â €â£€â ˆâ ‰â â¡¹â €â €â €â£„â£€â¡ â Ÿâ¢˜â£¯â£€â €â €â €|" << std::endl;
	file << "| â ¸â¡„â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ¡·â ºâ¡â ’â£¿â£€â£ â¡€â €â €â €â €â €â ˆâ €â ˆâ¡·â €â €|" << std::endl;
	file << "| â €â¢¸â šâ ‰â €â €â €â €â €â €â €â €â¢€â£¶â ºâ¡â €â ™â šâ €â â¡â¢§â£€â¡„â €â €â €â €â â ’â£‡â €â €|" << std::endl;
	file << "| â €â ¸â£„â£€â£°â €â €â €â €â €â €â ²â£Ÿâ£¿â¡¦â£·â €â €â €â €â¢ â â£¸â£¿â£·â¢¶â¡†â¢€â£¤â¡€â£ â¡¾â â €|" << std::endl;
	file << "| â €â €â €â €â ±â£€â €â¢€â¡±â „â ¤â œâ ‹â »â¡„â €â €â €â €â €â£¸â£´â¡¿â£â €â¢€â£­â£â£€â¡½â â €â €â €|" << std::endl;
	file << "| â €â €â €â €â €â €â ˆâ €â €â €â €â €â €â €â ¸â €â €â €â €â €â£¿â¡¼â â €â ‰â ‰â €â €â €â €â €â €â €â €|" << std::endl;
	file << "| â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¡†â €â €â €â €â¢¿â â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "| â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢°â£§â €â €â €â €â ¸â¡€â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "| â €â €â €â €â €â €â €â €â €â €â €â €â €â¢€â¡¼â â €â €â €â €â ˆâ£‡â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "| â €â €â €â €â €â €â €â €â €â €â£ â¡´â ’â¢‹â£â¡€â €â €â €â €â €â ˜â ¢â¢„â£€â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "| â €â €â €â €â €â €â €â €â €â €â ‰â ‰â ‰â ‰â â ‰â ™â ’â ¤â£˜â£—â ’â ’â ’â šâ ›â ƒâ €â €â €â €â €â €â €|" << std::endl;
	file << "| â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¡„â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "--------------------------------------------" << std::endl;
	file << std::endl << std::endl;
	file << "--------------------------------------------------------------------" << std::endl;
	file << "|	â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢±â£¸â €â €â €â €â €â €â €â €â¡„â¡„â¢€â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢€â €â €â €â € |" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â¢€â¡€â¢¶â¢ â €â¢€â¡¸â¡„â ’â¢ºâ €â£¸â£€â¡€â£¦â ½â ‘â â €â €â €â €â €â €â €â£†â£€â —â ‚â €â €â¡†â¢ â ƒâ¡ â œâ ’â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â¡„â €â¢¤â žâ¢³â Šâ “â £â¢¸â¡¸â£²â ‡â£˜â£¦â šâ¢—â£»â ‰â »â¡´â ‚â¢€â£€â €â €â£ â ‚â €â¡‡â €â €â €â €â¡šâ¡²â¢ƒâ¡‰â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â â ºâ ¤â¢¼â¡€â¡žâ¢¶â ¦â£¤â¡–â ¯â ­â¡½â Ÿâ¡²â €â €â£†â ´â Šâ¢€â €â ˆâ …â¡œâ ’â â €â €â ‰â¢±â €â €â €â ˆâ£‘â¡¼â â¢€â¢ â¢ â „â¢ â †â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â ¢â¢„â¢³â£â£€â †â ƒâ£‡â¡‡â œâ â¢³â¡„â¢°â¢ƒâ¡ˆâ¡©â£²â ¾â¡ƒâ¢€â €â ˜â ¤â¢â£ â ƒâ¢ â¢¼â£‡â£°â¢ƒâ£¼â €â €â €â£©â¡¾â ¦â£†â ·â£…â œâ ‰â â €â €â €â €|" << std::endl;
	file << "|â €â €â €â¢¦â €â ˆâ ’â¡¥â£½â¢â Œâ¢¹â¢¶â¡¤â¡§â£¾â €â €â ™â£¾â£¤â –â ¿â¡¿â£„â¡—â¢´â¢£â¡Œâ¢²â£©â šâ ¸â£Œâ£â ¹â£¸â£šâ¡™â¢·â£¤â žâ ¡â¢„â£€â¡³â£Žâ €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â¢„â££â¡ˆâ ¦â¡œâ£¸â¡¹â£°â ƒâ¡€â¢±â£›â£°â£‘â¢½â£§â €â¢°â£¿â¡‡â °â ‹â ‘â¡œâ¡—â¡žâ ‹â ‚â ˜â¢¦â ³â£ â ¿â ¦â£¼â¢©â£¤â¢Šâ¡¾â ‹â €â €â €â ‹â €â¢¨â â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â¢â ‡â €â¡â €â ˆâ¢¾â¡„â ™â£¤â ƒâ£Ÿâ €â ‹â£¿â£…â¡¾â¢»â¢€â¡€â¡†â£°â£¥â£Ÿâ¢±â£žâ£€â €â£¨â §â£¯â¡€â €â¢¸â£ˆâ£·â¡Ÿâ €â¢€â¢¦â €â €â €â¢ â â €â €â¡€â£·â €â €â €â €|" << std::endl;
	file << "|â ¤â¢²â šâ¢’â¢»â ™â¢¶â£´â¢ºâ ‰â ’â¡§â ”â ›â ²â¢¤â£¸â£¿â â£¼â¡¶â ¿â ¿â£½â£“â£¸â¢¿â£“â¡¶â£šâ¢§â¡·â£¿â¢«â£¦â£¸â£¿â â¢¹â¡´â ‹â ¸â¡„â €â €â¡žâ €â¢°â£°â¢£â Šâ €â£°â¡ â €|" << std::endl;
	file << "|â €â ˆâ¡„â €â¢­â¡‡â¡€â ‰â »â£‡â €â¡‡â €â €â €â£€â¡â¢¿â¡†â£¿â¢â¢€â¡´â ‹â£â£â¡¼â ‹â¡·â£‡â¡â£‡â£¿â¡œâ ‹â£¿â£¿â¡†â£¼â¡â¡„â£ â¢¹â €â£¸â â €â €â €â ›â£„â£¸â¡–â Šâ €|" << std::endl;
	file << "|â â ´â£…â¡†â ˜â¡Žâ¢¢â €â €â¢¹â£Žâ£·â €â €â£€â¡•â »â¢šâ£¿â£¿â¡‰â ‰â ³â£„â£°â Ÿâ ‘â¢¶â â ¹â¢´â â¡‡â£ â£´â ¿â£â£¾â¡‡â¢¹â¡ƒâ¡—â¢¸â£·â¢ƒâ£ â ”â ‹â €â¢ â ƒâ €â ‘â ¹â €|" << std::endl;
	file << "|â €â¢¤â¢Žâ£ˆâ¡²â µâ£ˆâ ‰â “â£¾â ™â£¾â£‡â €â €â ›â£†â¡‡â¢»â£¿â¡‡â €â£ â¡¾â ›â¢¶â¡†â ˆâ£‡â£°â â¢°â£¿â¢â¡â¢ â£â£¼â žâ ‰â ‰â ±â£¿â¢¿â¡­â£„â €â €â¢ â â €â €â €â €â €|" << std::endl;
	file << "|â â šâ ’â ‚â ¼â£„â €â ‰â ¢â£¼â¡€â ˆâ¢»â£†â  â¡„â ³â¡‡â¢¸â£¿â£§â£¾â¡Ÿâ €â €â¢¸â¡‡â €â£¸â ‹â €â£¼â¡â¢¾â ›â£¿â¢¹â¡â €â €â¢€â¡¼â ƒâ¢˜â ‚â¢¨â €â¢€â¡žâ €â¢€â „â¢€â †â¡€|" << std::endl;
	file << "|â €â €â €â €â €â ˆâ ³â£„â €â ˆâ ³â£„â €â£¿â£†â ¸â¡ â œâ£†â£¿â£¿â â €â €â €â¢¸â¡‡â¢°â ‡â €â¢€â£¿â â£¿â¢°â¡‡â£¼â â €â¢ â¡žâ â €â ¸â£šâ£®â µâ Ÿâ “â ¦â£¸â €â¡¤â ¼â “|" << std::endl;
	file << "|â €â €â €â €â €â €â €â ™â¢¦â£€â£€â£ˆâ ³â£œâ¢¿â£¯â €â €â¢ˆâ£¿â¡¿â ¦â£¤â£€â €â¢¸â£·â¡â €â €â£¸â£¿â¡¾â ‹â£¿â¢â¡Ÿâ €â£°â£¯â£¤â ¶â žâ£‹â ½â¢“â£’â¡¡â ¤â ’â ›â ³â¢§â¡€â¡„|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â ‰â ‰â ‰â ‰â ™â ³â£¿â£·â¡€â¢¸â£¿â¡‡â €â €â ‰â ›â¢¾â£¿â €â €â €â£¿â¡Ÿâ â£¸â£¿â£¾â£¿â£¿â Ÿâ¢‰â£ â£´â žâ ‹â ‰â ‰â ‰â ‚â €â €â €â €â ˆâ ƒâ €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ¢»â£¿â£¾â£¿â¡‡â €â €â €â €â¢¸â£¿â €â €â¢¸â¡Ÿâ¢€â£¼â¡¿â ‹â£¼â£¿â£¿â¡¿â ›â ‰â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ™â£¿â£¿â¡‡â €â €â €â €â €â£¿â¡€â €â£¿â£·â¡¿â ‹â €â¢ â£¿â Ÿâ â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢¸â£¿â£¿â£„â €â €â €â €â¢¿â¡‡â£¸â£¿â Ÿâ €â €â¢€â£¾â¡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢¸â£¿â£¿â£¿â£†â €â €â €â£¸â£·â£¿â¡‡â €â €â €â£¼â¡Ÿâ €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ¸â£¿â¡â¢¿â£¿â£¦â£€â£¾â£¿â¢¯â£¿â €â €â €â£¼â¡Ÿâ €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢ â£¿â£¿â£®â£¿â£¿â£¿â¡¿â â£¸â¡Ÿâ €â €â£¼â¡Ÿâ €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ˜â¢¿â£¿â£¿â£¿â£¿â¡Ÿâ €â¢ â£¿â ƒâ €â£¼â¡¿â â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ¹â£¿â£¿â£¿â£·â£ â£¾â£¿â£¤â£¾â£¿â¡‡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ¸â£¿â£¿â£¿â£¿â£¿â£¿â Ÿâ ‹â â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¿â£¿â£¿â£¿â£¿â¡Ÿâ €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¿â£¿â£¿â£¿â£¿â¡‡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¿â£¿â£¿â£¿â£¿â¡‡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¿â£¿â£¿â£¿â£¿â¡‡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¿â£¿â£¿â£¿â£¿â¡‡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¿â£¿â£¿â£¿â£¿â¡‡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¿â£¿â£¿â£¿â£¿â£·â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢°â£¿â£¿â£¿â£¿â£¿â£¿â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢¸â£¿â£¿â£¿â£¿â£¿â£¿â¡†â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£‡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¸â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡„â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£°â¡¿â ¿â ›â »â£¿â£¿â ¿â ¿â ¿â¢¿â£„â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "|â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â â €â €â €â €â ˆâ ¡â €â €â €â €â â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €|" << std::endl;
	file << "--------------------------------------------------------------------" << std::endl;
	file << std::endl;
}

void createShrubberyFile(const std::string &target)
{
	std::string filename = target + "_shrubbery";
	std::ofstream file;
	if (!file)
		throw ShrubberyCreationForm::UnableToCreateFileException();
	file.open(filename.c_str());
	if (!file.is_open())
		throw ShrubberyCreationForm::UnableToCreateFileException();
	trees(file);
	file.close();
}

void ShrubberyCreationForm::execute(const Bureaucrat &executor) const
{
	std::cout << "Trying to execute Shrubbery Creation Form..." << std::endl;
	if (!getIsSigned())
		throw AForm::FormNotSignedException();
	if (executor.getGrade() > getGradeToExecute())
		throw Bureaucrat::GradeTooLowException();
	try{
		createShrubberyFile(this->target);
		std::cout << GREEN << "Shrubbery file created successfully" << RESET << std::endl;
	}
	catch (std::exception &e) {
		std::cerr << BOLDRED << "[[ EXCEPTION FOUND: " << RESET << RED << e.what() << BOLDRED << " ]]" << RESET << std::endl;
	} catch (...) {
		std::cerr << BOLDRED << "[[ EXCEPTION FOUND: " << RESET << RED << "Unknown exception" << BOLDRED << " ]]" << RESET << std::endl;
	}
}

std::string ShrubberyCreationForm::getTarget() const
{
	return (this->target);
}
